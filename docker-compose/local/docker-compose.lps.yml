version: "3"
services:
  lps:
    build:
      context: ../../
      dockerfile: docker-compose/lps/Dockerfile
      args:
        UID: "${LPS_UID}"
    image: lps:latest
    container_name: lps01
    environment:
      - BASE_URL
      - PEGIN_PROVIDER_NAME
      - PEGIN_FEE
      - PEGIN_QUOTE_EXPIRATION
      - PEGIN_ACCEPTED_QUOTE_EXPIRATION
      - PEGIN_MIN_TRANSACTION_VALUE
      - PEGIN_MAX_TRANSACTION_VALUE
      - PEGOUT_PROVIDER_NAME
      - PEGOUT_FEE
      - PEGOUT_QUOTE_EXPIRATION
      - PEGOUT_ACCEPTED_QUOTE_EXPIRATION
      - PEGOUT_MIN_TRANSACTION_VALUE
      - PEGOUT_MAX_TRANSACTION_VALUE
      - LOG_FILE
      - DEBUG
      - IRIS_ACTIVATION_HEIGHT
      - SERVER_PORT
      - DB_PATH
      - RSK_ENDPOINT
      - RSK_BRIDGE_ADDR
      - RSK_REQUIRED_BRIDE_CONFIRMATIONS
      - PEGIN_PROVIDER_KEY_DIR
      - PEGIN_PROVIDER_BTC_ADDR
      - PEGIN_PROVIDER_ACCOUNT_NUM
      - PEGIN_PROVIDER_PWD_FILE
      - PEGIN_PROVIDER_CHAIN_ID
      - PEGIN_PROVIDER_MAX_CONF
      - PEGIN_PROVIDER_CONFIRMATIONS
      - PEGIN_PROVIDER_TIME_FOR_DEPOSIT
      - PEGIN_PROVIDER_CALL_TIME
      - PEGIN_PROVIDER_CALL_FEE
      - PEGIN_PROVIDER_PENALTY_FEE
      - PEGIN_PROVIDER_KEY_SECRET
      - PEGIN_PROVIDER_PASSWORD_SECRET
      - PEGOUT_PROVIDER_KEY_DIR
      - PEGOUT_PROVIDER_BTC_ADDR
      - PEGOUT_PROVIDER_ACCOUNT_NUM
      - PEGOUT_PROVIDER_PWD_FILE
      - PEGOUT_PROVIDER_MAX_CONF
      - PEGOUT_PROVIDER_CONFIRMATIONS
      - PEGOUT_PROVIDER_TIME_FOR_DEPOSIT
      - PEGOUT_PROVIDER_CALL_TIME
      - PEGOUT_PROVIDER_CALL_FEE
      - PEGOUT_PROVIDER_PENALTY_FEE
      - PEGOUT_PROVIDER_CHAIN_ID
      - PEGOUT_PROVIDER_DEPOSIT_DATE_LIMIT
      - PEGOUT_PROVIDER_EXPIRE_DATE
      - PEGOUT_PROVIDER_EXPIRE_BLOCKS
      - PEGOUT_PROVIDER_KEY_SECRET
      - PEGOUT_PROVIDER_PASSWORD_SECRET
      - LIQUIDITY_PROVIDER_RSK_ADDR
      - BTCD_RPC_USER
      - BTCD_RPC_PASS
      - RSK_CHAIN_ID
      - LBC_ADDR
      - LPS_STAGE
      - MONGODB_USER
      - MONGODB_PASSWORD
      - MONGODB_DATABASE
      - MONGODB_LOCAL_PORT
      - MONGODB_LOCAL_HOST
      - RSKJ_CONNECTION_STRING
      - ERP_KEYS
      - BTC_NETWORK
      - BTC_TX_FEE
      - BTC_ENDPOINT
      - BTC_USERNAME
      - BTC_PASSWORD
      - AWS_ACCESS_KEY_ID
      - AWS_SECRET_ACCESS_KEY
      - AWS_REGION
      - ENCRYPT_APP_KEY
    ports:
      - "8080:8080"
    volumes:
      - ${LPS_HOME:-./volumes/lps/db}:/home/lps/db
      - ${LPS_HOME:-./volumes/lps/logs}:/home/lps/logs
    networks:
      - net_lps
    command: ["sh", "start.sh"]
